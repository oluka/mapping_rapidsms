function LabeledMarker(b,a){this.opts_=a;this.labelText_=a.labelText||"";this.labelClass_=a.labelClass||"LabeledMarker_markerLabel";this.labelOffset_=a.labelOffset||new GSize(0,0);this.clickable_=(a.clickable==false)?false:true;this.title_=a.title||"";this.labelVisibility_=true;this.ownVisibility_=true;if(a.draggable){a.draggable=false}GMarker.apply(this,arguments)}LabeledMarker.prototype=new GMarker(new GLatLng(0,0));LabeledMarker.prototype.initialize=function(c){GMarker.prototype.initialize.apply(this,arguments);this.map_=c;this.div_=document.createElement("div");this.div_.className=this.labelClass_;this.div_.innerHTML=this.labelText_;this.div_.style.position="absolute";if(this.clickable_){this.div_.style.cursor="pointer"}this.div_.title=this.title_;if(!this.ownVisibility_){this.hide()}this.applyLabelVisibility_();c.getPane(G_MAP_MARKER_PANE).appendChild(this.div_);if(this.clickable_){var d=["click","dblclick","mousedown","mouseup","mouseover","mouseout"];for(var b=0;b<d.length;b++){var a=d[b];GEvent.addDomListener(this.div_,a,GEvent.callback(GEvent,GEvent.trigger,this,a,this.getLatLng()))}}};LabeledMarker.prototype.redraw=function(a){GMarker.prototype.redraw.apply(this,arguments);this.redrawLabel_()};LabeledMarker.prototype.redrawLabel_=function(){var a=this.map_.fromLatLngToDivPixel(this.getLatLng());var b=GOverlay.getZIndex(this.getLatLng().lat());this.div_.style.left=(a.x+this.labelOffset_.width)+"px";this.div_.style.top=(a.y+this.labelOffset_.height)+"px";this.div_.style.zIndex=b};LabeledMarker.prototype.remove=function(){GEvent.clearInstanceListeners(this.div_);if(this.div_.outerHTML){this.div_.outerHTML=""}if(this.div_.parentNode){this.div_.parentNode.removeChild(this.div_)}this.div_=null;GMarker.prototype.remove.apply(this,arguments)};LabeledMarker.prototype.copy=function(){var a=new LabeledMarker(this.getLatLng(),this.opts_);a.labelVisibility_=this.labelVisibility_;a.ownVisibility_=this.ownVisibility_;return a};LabeledMarker.prototype.show=function(){GMarker.prototype.show.apply(this,arguments);this.ownVisibility_=true;this.applyLabelVisibility_()};LabeledMarker.prototype.hide=function(){GMarker.prototype.hide.apply(this,arguments);this.ownVisibility_=false;this.applyLabelVisibility_()};LabeledMarker.prototype.setLabelVisibility=function(a){this.labelVisibility_=a;this.applyLabelVisibility_()};LabeledMarker.prototype.getLabelVisibility=function(){return this.labelVisibility_};LabeledMarker.prototype.applyLabelVisibility_=function(){if(this.div_){if((!this.isHidden())&&this.labelVisibility_){this.div_.style.display="block"}else{this.div_.style.display="none"}}};LabeledMarker.prototype.setLabelText=function(a){this.labelText_=a;this.div_.innerHTML=a;this.opts_.labelText=a};
